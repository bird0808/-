<!--
 * @Descripttion: 
 * @Author: 只会Ctrl CV的菜鸟
 * @version: 
 * @Date: 2023-02-05 19:58:06
 * @LastEditTime: 2023-02-09 17:52:21
-->
# 进程调度的三个层次
- **高级调度（作业调度）频率最低**
按照一定的算法从硬盘中把作业调入内存，即把一个程序从硬盘加载到内存，但是此时还未分配cpu，作业调度每个作业只调入调出一次。进程状态：无->创建态->就绪态
- **中级调度（内存调度）频率中等**
根据算法把作业调出内存挂起或把在硬盘挂起的作业调回内存，挂起的进程处于挂起状态。进程状态：挂起态->就绪态，阻塞挂起->阻塞态
- **低级调度（进程调度/处理机调度）频率最高**
按照算法从就绪态的进程队列中选取一个进程，把cpu分配给它。进程状态：就绪态->运行态
# 临界资源
一个时间段内只允许一个进程使用的资源，各进程需要互斥的进行访问，临界区：访问临界资源的那段代码。
进程在**操作系统内核临界区**中不能进行进程切换与调度，进程在普通临界区是可以进行进程调度与切换的。

# 常见公式

**cpu利用率**：忙碌时间/总时间
**系统吞吐量**：完成作业数量/单位时间
**周转时间**：作业完成时间-作业提交时间
**平均周转时间**：每个作业周转时间之和/作业数
**带权周转时间**：一个作业的周转时间/作业实际运行时间，针对单个作业
**平均带权周转时间**：每个作业带权周转时间之和/作业数
**等待时间**：作业\进程等待cpu的时间，不计算io等待的时间
**响应比**：等待时间+运行时间/运行时间

# 调度算法
1. 先来先服务（FCFS）
适用于作业\进程调度，非抢占式，不会导致饥饿，对长作业有利，短作业不利
2. 最短作业优先（SJF）
**非抢占的短作业优先：SPF**
**抢占的短作业优先：SRTF：最短剩余时间优先**
可能产生饥饿现象，适用于作业\进程调度
3. 高响应比优先（HRRN）
非抢占式，在调度时计算响应比，选取响应比最高的分配cpu，适用于作业\进程调度，不会饥饿
4. 时间片轮转（RR）
根据时间片大小，从就绪队列队头中轮流取出进程分配cpu，时间片到了剥夺cpu，把进程放到队尾。**只用于进程调度**，抢占式算法，不会导致饥饿。
5. 优先级调度
**非抢占**：从就绪队列中选取优先级最高的进程为其分配cpu，进程运行时不可被其他进程剥夺
**抢占式**：从就绪队列中选取优先级最高的进程为其分配cpu，当有优先级更高的进程到达就绪队列，立即剥夺cpu分配给优先级更高的进程。
适用于作业\进程，会导致饥饿
6. 多级反馈队列调度算法（抢占式）
设置多个就绪队列，各级绪队列**优先级从高到低**，**时间片从小到大**，每个队列都采用FCFS算法
当新进程进入内存后，首先将它放入第一队列的末尾，按FCFS原则等待调度。当轮到该进程执行时，如它能在该时间片内完成，便可撤离内存。否则，调度程序将其转入第二队列的末尾等待调度；如果它在第二队列中运行一个时间片后仍未完成，再依次将它放入第三队列，依此类推
**每次运行都会检查，优先运行优先级高的队列里的进程，只有高优先级队列的进程运行完了，才会运行低一级优先级队列的进程。**
**只用于进程调度**，会导致饥饿

## 六种调度算法对比
**适用于作业\进程的算法**：先来先服务、短作业优先、高响应比优先、优先级调度
**只适用于进程的算法**：时间片轮转、多级反馈队列调度算法
**不会导致饥饿的算法**：先来先服务、高响应比优先、时间片轮转
**会导致饥饿的算法**：短作业优先、优先级调度、多级反馈队列调度算法
**非抢占式的算法**：先来先服务、非抢占式的短作业优先、高响应比优先、非抢占式优先级调度
**抢占式的算法**：最短剩余时间优先、时间片轮转、抢占式优先级调度、多级反馈队列调度算法

其中**短作业优先、优先级调度**这两个算法有非抢占的和抢占的，短作业优先可能因为源源不断的短作业到来导致长作业饥饿，优先级调度和多级反馈队列调度算法可能会由于优先级高的作业一直到来导致低优先级的作业得不到调度导致饥饿
高响应比优先由于等待时间的原因，对于作业来说，（响应比：等待时间+运行时间/运行时间）等待时间越长，响应比越大，所以不会导致饥饿。

